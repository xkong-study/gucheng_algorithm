## æœ€å¤§çŸ©å½¢é—®é¢˜æ ¸å¿ƒç†è§£ï¼ˆMaximal Rectangleï¼‰

### ğŸ” æ­£ç¡®è¡¨è¿°ï¼š

> æ¯ä¸€è¡Œéå†çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨æ›´æ–°çš„æ˜¯æ¯ä¸€åˆ—ä¸Šçš„æŸ±å­é«˜åº¦ã€‚
> 
> æ‰€ä»¥ `heights[j]` è¡¨ç¤ºçš„æ˜¯ï¼š**ç¬¬ j åˆ—**åœ¨å½“å‰è¡Œå¾€ä¸Š**è¿ç»­çš„ '1' çš„æ•°é‡**ã€‚

---

### ä¸¾ä¸ªä¾‹å­ï¼š

```txt
çŸ©é˜µï¼š
[
  ["1","0","1","0"],
  ["1","1","1","1"],
  ["0","1","1","0"]
]
```

æˆ‘ä»¬ä¸€è¡Œä¸€è¡Œæ¥çœ‹ï¼š

#### ç¬¬ 1 è¡Œå¤„ç†å®Œåçš„ heightsï¼š
```
heights = [1, 0, 1, 0]
```
è§£é‡Šï¼šåªæœ‰ç¬¬ 1 å’Œç¬¬ 3 åˆ—æ˜¯ '1'ï¼Œæ‰€ä»¥è¿™ä¸¤åˆ—é«˜åº¦æ˜¯ 1ã€‚

#### ç¬¬ 2 è¡Œå¤„ç†åçš„ heightsï¼š
```
heights = [2, 1, 2, 1]
```
è§£é‡Šï¼š
- ç¬¬ 1 åˆ—ï¼šä¸Šé¢æ˜¯ 1ï¼Œè¿™è¡Œä¹Ÿæ˜¯ 1 â†’ é«˜åº¦ = 2
- ç¬¬ 2 åˆ—ï¼š0 + 1 = 1
- ç¬¬ 3 åˆ—ï¼š1 + 1 = 2
- ç¬¬ 4 åˆ—ï¼š0 + 1 = 1

---

### é«˜åº¦å«ä¹‰æ€»ç»“ï¼š

- æ¯ä¸€åˆ—ä»£è¡¨ä¸€æ ¹æŸ±å­
- æ¯ä¸€è¡Œæ˜¯ä¸€æ¬¡åº•è¾¹ï¼ˆåœ°é¢ï¼‰
- heights[j] è¡¨ç¤ºï¼š**ç¬¬ j åˆ—ä»å½“å‰è¡Œå¾€ä¸Šè¿ç»­çš„ 1 çš„ä¸ªæ•°**

---

### æ€»ç»“ä¸€å¥è¯ï¼š

> æ¯ä¸€åˆ—ç´¯åŠ çš„æ˜¯è¿ç»­çš„ '1' æ•°é‡ï¼Œæ•´ä¸ªçŸ©é˜µåƒå ç –ä¸€æ ·ï¼Œ**è¡Œæ˜¯åº•è¾¹ï¼Œåˆ—æ˜¯æŸ±å­**ï¼Œæœ€åæ¯ä¸€è¡Œéƒ½è°ƒç”¨ä¸€æ¬¡æŸ±çŠ¶å›¾æœ€å¤§çŸ©å½¢ç®—æ³•ï¼Œæ±‚å‡ºæœ€å¤§é¢ç§¯ã€‚

---

å¯ä»¥é…åˆæŸ±çŠ¶å›¾æœ€å¤§é¢ç§¯ç®—æ³•ï¼ˆå¦‚å•è°ƒæ ˆï¼‰ä½¿ç”¨ï¼Œå¤„ç†æ¯ä¸€è¡Œçš„ `heights`ï¼Œè·å¾—å…¨å±€æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚



```
function maximalRectangle(matrix) {
  if (!matrix.length || !matrix[0].length) return 0;

  const rows = matrix.length;
  const cols = matrix[0].length;
  const heights = Array(rows).fill(0).map(() => Array(cols).fill(0));
  let maxArea = 0;

  for (let i = 0; i < rows; i++) {
    for (let j = 0; j < cols; j++) {
      if (matrix[i][j] === '1') {
        heights[i][j] = (i === 0 ? 0 : heights[i - 1][j]) + 1;
      }
    }
    maxArea = Math.max(maxArea, largestRectangleArea(heights[i]));
  }

  return maxArea;
}


function largestRectangleArea(heights) {
    //stack increasing - > low - > higher then low -> sum compare
    //dummy head
    //ä½¿ç”¨å•è°ƒé€’å‡çš„æ ˆç»“æ„æ—¶ï¼Œå®¹æ˜“ä¸¢å¤±æŸäº›æœ‰æ•ˆçš„çŸ©å½¢åŒºåŸŸçš„è®¡ç®—ã€‚å•è°ƒé€’å¢æ ˆçš„åšæ³•æ›´ç¬¦åˆæœ€å¤§çŸ©å½¢é¢ç§¯çš„è®¡ç®—éœ€è¦ï¼Œé€šè¿‡ç»´æŠ¤æ ˆä¸­çš„å…ƒç´ ï¼Œé€æ­¥è®¡ç®—æ¯ä¸ªå…ƒç´ èƒ½æ’‘èµ·çš„æœ€å¤§çŸ©å½¢åŒºåŸŸã€‚
    let sum = 0;
    let stack = [];
    heights.push(0);
    for(let i = 0 ; i < heights.length ; i++){
        while(stack.length > 0 && heights[i] < heights[stack[stack.length-1]]){
            let minHeight = heights[stack.pop()];
            //if increasing  1 2 0 how to solov 2 area
            let width = stack.length === 0 ? i : i - stack[stack.length - 1] - 1;
            sum = Math.max(width*minHeight,sum);
        }
        stack.push(i);
    }
    return sum;
};
```
