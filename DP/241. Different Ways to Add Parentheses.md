## LeetCode 241. Different Ways to Add Parentheses

### é¢˜ç›®æè¿°
ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼ŒåŒ…å«æ•°å­—å’Œè¿ç®—ç¬¦ `+`ã€`-`ã€`*`ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„åŠ æ‹¬å·ç»„åˆä¸‹çš„è®¡ç®—ç»“æœã€‚

**ä½ çš„æ–¹æ³•ï¼ˆé€å­—ç¬¦é€’å½’ï¼‰ï¼š**

**ä¼˜ç‚¹ï¼š**      

ç»“æ„ä¸Šç±»ä¼¼è¡¨è¾¾å¼æ±‚å€¼ï¼Œæ›´è´´è¿‘æ‰‹åŠ¨è®¡ç®—æ­¥éª¤

ç†è§£ä¸Šç›´è§‚ï¼šä»å·¦å¾€å³æ‰«æï¼Œé€æ­¥æ„å»ºå€¼


**éš¾ç‚¹ï¼š**

å¯¹æ“ä½œé¡ºåºçš„è¡¨è¾¾èƒ½åŠ›è¾ƒå¼±      

ä¸å®¹æ˜“è¦†ç›–æ‰€æœ‰åˆ†ç»„æƒ…å†µï¼ˆå› ä¸ºä¸€ä¸ªè¡¨è¾¾å¼å¯èƒ½æœ‰å¤šä¸ªæ‹¬å·ç»„åˆæ–¹å¼ï¼‰   

æ¯”å¦‚ï¼š 

2*3-4*5 å¯ä»¥æ‹¬å·ä¸ºï¼š   
      
(2*(3-(4*5)))      

((2*3)-(4*5))      

((2*(3-4))*5)       


æ¯ç§ç»„åˆéƒ½è¦â€œå›å¤´â€å¤„ç†ï¼Œä¸é€‚åˆä»å·¦åˆ°å³å¤„ç†      

æˆ‘çš„æ–¹æ³•ï¼ˆåˆ†æ²»é€’å½’ï¼‰ï¼š

æ€è·¯ï¼šæ¯å½“é‡åˆ°ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå°±åˆ‡åˆ†è¡¨è¾¾å¼ï¼Œé€’å½’å·¦è¾¹å’Œå³è¾¹æ‰€æœ‰å¯èƒ½çš„å€¼ç»„åˆ

ä¼˜ç‚¹ï¼š  

è‡ªç„¶æ¶µç›–äº†æ‰€æœ‰ã€Œæ‹¬å·ç»„åˆã€æ–¹å¼         

æ¯ä¸€å±‚æ“ä½œéƒ½èƒ½å®Œæ•´æ‹¿åˆ°å·¦å³è¡¨è¾¾å¼çš„å…¨éƒ¨å¯èƒ½å€¼     

ç¼ºç‚¹ï¼š          

å¯¹äºå¾ˆé•¿çš„è¡¨è¾¾å¼æ¥è¯´ï¼Œæœ‰äº›é‡å¤è®¡ç®—ï¼ˆå¯ä»¥ä¼˜åŒ–ç”¨ memoï¼‰     
---

### è§£æ³•æ€»ç»“ï¼šåˆ†æ²» + è®°å¿†åŒ–æœç´¢ï¼ˆIndex + Rangeï¼‰

> ä½ å¸Œæœ›ç”¨â€œç´¢å¼•æ–¹å¼â€ä»£æ›¿å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œæå‡æ•ˆç‡ï¼›æˆ‘ä»¬é‡‡ç”¨ `dfs(start, end)` è¡¨ç¤º `expression[start...end]` è¡¨è¾¾å¼çš„æ‰€æœ‰å¯èƒ½ç»“æœã€‚

---

### æ ¸å¿ƒæ€æƒ³

- æ¯å½“é‡åˆ°ä¸€ä¸ªæ“ä½œç¬¦ `+ - *`ï¼Œå°†è¡¨è¾¾å¼åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†
- é€’å½’æ±‚å‡ºå·¦å³ä¸¤éƒ¨åˆ†çš„æ‰€æœ‰ç»“æœ
- åˆå¹¶å·¦å³ç»“æœå¹¶åŠ å…¥ç»“æœé›†
- ç”¨ `memo[start][end]` è®°å¿†åŒ–é¿å…é‡å¤è®¡ç®—

---

### ä»£ç å®ç°ï¼šå¸¦ memo çš„ç´¢å¼•åˆ†æ²»ç‰ˆæœ¬

```js
var diffWaysToCompute = function(expression) {
    const n = expression.length;
    const memo = new Map();

    function dfs(start, end) {
        const key = `${start},${end}`;
        if (memo.has(key)) return memo.get(key);

        const res = [];

        for (let i = start; i <= end; i++) {
            const ch = expression[i];
            if (ch === '+' || ch === '-' || ch === '*') {
                const left = dfs(start, i - 1);
                const right = dfs(i + 1, end);

                for (const l of left) {
                    for (const r of right) {
                        if (ch === '+') res.push(l + r);
                        else if (ch === '-') res.push(l - r);
                        else if (ch === '*') res.push(l * r);
                    }
                }
            }
        }

        if (res.length === 0) {
            res.push(Number(expression.slice(start, end + 1)));
        }

        memo.set(key, res);
        return res;
    }

    return dfs(0, n - 1);
};
```

---

### ç¤ºä¾‹

```js
Input: "2*3-4*5"
Output: [-34, -14, -10, -10, 10]
è§£é‡Šï¼šæ‰€æœ‰åˆæ³•æ‹¬å·ç»„åˆï¼š
- (2*(3-(4*5))) = -34
- ((2*3)-(4*5)) = -14
- ((2*(3-4))*5) = -10
- (2*((3-4)*5)) = -10
- (((2*3)-4)*5) = 10
```

---

### æ€»ç»“
- åˆ†æ²»ç”¨äºç»„åˆæ‰€æœ‰å¯èƒ½çš„æ‹¬å·ç»“æ„
- memo é¿å…é‡å¤è®¡ç®—åŒºé—´å€¼
- å­—ç¬¦ä¸²åˆ‡ç‰‡æ›¿æ¢ä¸ºç´¢å¼•æ›´é«˜æ•ˆ
- æšä¸¾æ‰€æœ‰ä½ç½®çš„ç¬¦å·ä½œä¸ºåˆ†å‰²ç‚¹

è®©æˆ‘ä»¬æŠŠè¡¨è¾¾å¼çš„æ‰€æœ‰å¯èƒ½è§£ï¼Œå…¨éƒ¨ç®—å‡ºæ¥ï¼ğŸš€
