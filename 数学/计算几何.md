# §5.1 点与线专题：几何题常见算法知识 

**相关题目与所用性质**

---

| 题目编号 | 标题 | 使用的数学性质与算法 |
|----------|------|----------------------|
| 1232 | 缀点成线 | 所有点斜率相同 ⇒ 共线；使用斜率交叉乘避免浮点数误差 |
| 2280 | 表示一个折线图的最少线段数 | 斜率变化点数 ⇒ 拐点；使用前缀斜率比较 + DP 最少段覆盖 |
| 1610 | 可见点的最大数目 | 极角排序 + 滑动窗口；使用 atan2 + 模 360° 处理可视范围 |
| 面试题 16.03 | 交点 | 几何求直线交点 + 去重（哈希集合存储点）|
| 面试题 16.13 | 平分正方形 | 对称几何；构造两点中点 + 垂直平分线解析式 |
| 面试题 16.14 | 最佳直线 | 枚举所有点对，统计斜率 (dy/dx) 的出现频次；使用分数归约哈希 |
| LCP 37 | 最小矩形面积 | 利用点对中点 + 距离平方构造矩形；中点 + 半径唯一性作为哈希键 |
| 2152（会员） | 穿过所有点的最少直线数量 | 枚举所有子集判断共线性；状压 dp 最小直线覆盖所有点 |

---

### ✅ 涉及到的算法与知识点（汇总）

#### 📐 1. 斜率相同判定：是否共线
- 判定所有点是否在一条直线上：

<img width="405" alt="Screenshot 2025-04-13 at 21 18 41" src="https://github.com/user-attachments/assets/17a4e4ac-aa42-4588-8e38-908dee4ddc5e" />

- 避免浮点数：尽量用乘法交叉判断斜率

#### ➕ 常用斜率公式：
- 两点斜率：<img width="100" alt="Screenshot 2025-04-13 at 21 18 53" src="https://github.com/user-attachments/assets/11b0bee6-7d12-4c22-a4ce-fe4eeecc88c2" />

- 共线三点：交叉乘判断避免除法

#### 🟥 2. 垂直判定（正交向量）
- 两向量垂直：点积为 0：
<img width="197" alt="Screenshot 2025-04-13 at 21 19 07" src="https://github.com/user-attachments/assets/d0473884-5fb6-4ff6-912f-8fde0910139e" />

- 点积公式：<img width="142" alt="Screenshot 2025-04-13 at 21 19 18" src="https://github.com/user-attachments/assets/08d7d808-2904-47c9-bd98-c92729fed093" />


#### 📍 3. 中点构造与性质
- 给定两点 \((x_1, y_1), (x_2, y_2)\)，其中点为：

<img width="241" alt="Screenshot 2025-04-13 at 21 19 27" src="https://github.com/user-attachments/assets/e6642010-0d65-43c1-ba1c-33fd100397c5" />

- 应用：对称构造、矩形对角线交点、平分线几何、最小矩形面积哈希键构造等

#### 📉 4. 极角排序 / 可视角窗口
- 旋转窗口统计特定角度范围内最多点数
- 应用题：1610 可见点最大数目（极角 + 滑窗）

#### 🧮 5. 哈希表统计斜率出现频率
- 求穿过最多点的直线（面试 16.14）：哈希计数最多斜率
- 精确斜率：用分数 gcd(a, b) 归约后的 (dy/dx)

#### 🔳 6. 最小矩形面积（LCP 37）
- 利用点对斜边中点、对边长构建矩形
- 中点坐标和距离平方作为哈希键

#### 🧠 7. 状态压缩枚举所有点集
- LeetCode 2152：最少直线覆盖所有点
- 枚举所有合法子集构成直线，用 dp 压缩状态

#### ✂️ 8. 折线段覆盖 / 拐点计数
- 2280：DP 记录前缀最后斜率，变化即拐点
- 可配合 map 保存历史最小折线数

---

### ✅ 工具函数常备：
```js
// 判断是否三点共线
function isColinear(x1, y1, x2, y2, x3, y3) {
  return (y2 - y1) * (x3 - x2) === (y3 - y2) * (x2 - x1);
}

// 判断两向量是否垂直（点积为 0）
function isPerpendicular(ax, ay, bx, by) {
  return ax * bx + ay * by === 0;
}

// 构造两点的中点坐标
function midpoint(x1, y1, x2, y2) {
  return [(x1 + x2) / 2, (y1 + y2) / 2];
}

// 计算最大公约数 gcd
function gcd(a, b) {
  return b === 0 ? a : gcd(b, a % b);
}
```

---

